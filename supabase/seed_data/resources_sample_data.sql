-- Sample data for Resources module testing
-- This script inserts test data for the resources table

-- Insert sample resource categories
INSERT INTO resource_categories (id, organization_id, name, description, created_at, updated_at) VALUES
('cat-1', '00000000-0000-0000-0000-000000000001', 'Human Resources', 'HR policies and procedures', NOW(), NOW()),
('cat-2', '00000000-0000-0000-0000-000000000001', 'Safety & Compliance', 'Safety protocols and compliance documents', NOW(), NOW()),
('cat-3', '00000000-0000-0000-0000-000000000001', 'Operations', 'Operational procedures and guidelines', NOW(), NOW()),
('cat-4', '00000000-0000-0000-0000-000000000001', 'Training', 'Training materials and modules', NOW(), NOW()),
('cat-5', '00000000-0000-0000-0000-000000000001', 'Templates', 'Document templates and forms', NOW(), NOW());

-- Insert sample resources
INSERT INTO resources (
  id, 
  organization_id, 
  title, 
  description, 
  type, 
  category, 
  tags, 
  status, 
  visibility, 
  version, 
  language, 
  file_url, 
  file_size, 
  file_type, 
  thumbnail_url, 
  download_count, 
  view_count, 
  is_featured, 
  is_pinned, 
  expiry_date, 
  metadata, 
  created_at, 
  updated_at, 
  created_by, 
  updated_by
) VALUES
-- HR Resources
(
  'res-001',
  '00000000-0000-0000-0000-000000000001',
  'Employee Handbook 2024',
  'Comprehensive guide covering company policies, benefits, code of conduct, and procedures for all employees.',
  'policy',
  'Human Resources',
  ARRAY['hr', 'policies', 'handbook', 'benefits', 'conduct'],
  'published',
  'public',
  '2.1',
  'en',
  'https://example.com/files/employee-handbook-2024.pdf',
  2048576,
  'application/pdf',
  'https://example.com/thumbnails/handbook-thumb.jpg',
  156,
  423,
  true,
  true,
  NULL,
  '{"department": "HR", "approval_date": "2024-01-15", "next_review": "2024-12-31"}',
  '2024-01-15 10:00:00+00',
  '2024-02-01 14:30:00+00',
  '00000000-0000-0000-0000-000000000002',
  '00000000-0000-0000-0000-000000000002'
),
(
  'res-002',
  '00000000-0000-0000-0000-000000000001',
  'Remote Work Policy',
  'Guidelines and requirements for remote work arrangements, including equipment, security, and performance expectations.',
  'policy',
  'Human Resources',
  ARRAY['remote', 'work', 'policy', 'guidelines', 'security'],
  'published',
  'public',
  '1.3',
  'en',
  'https://example.com/files/remote-work-policy.pdf',
  1024768,
  'application/pdf',
  NULL,
  89,
  234,
  false,
  false,
  NULL,
  '{"effective_date": "2024-03-01", "applies_to": "all_employees"}',
  '2024-02-20 09:15:00+00',
  '2024-03-01 11:20:00+00',
  '00000000-0000-0000-0000-000000000002',
  '00000000-0000-0000-0000-000000000002'
),

-- Safety Resources
(
  'res-003',
  '00000000-0000-0000-0000-000000000001',
  'Maritime Safety Training Module',
  'Mandatory safety training covering emergency procedures, equipment usage, and regulatory compliance for maritime operations.',
  'training',
  'Safety & Compliance',
  ARRAY['safety', 'training', 'maritime', 'emergency', 'compliance'],
  'published',
  'public',
  '3.0',
  'en',
  'https://example.com/files/maritime-safety-training.pdf',
  5242880,
  'application/pdf',
  'https://example.com/thumbnails/safety-training-thumb.jpg',
  267,
  892,
  true,
  true,
  '2025-01-15',
  '{"certification_required": true, "duration_hours": 4, "renewal_period": "annual"}',
  '2024-01-10 08:00:00+00',
  '2024-01-25 16:45:00+00',
  '00000000-0000-0000-0000-000000000003',
  '00000000-0000-0000-0000-000000000003'
),
(
  'res-004',
  '00000000-0000-0000-0000-000000000001',
  'Emergency Response Procedures',
  'Step-by-step procedures for various emergency scenarios including fire, medical emergencies, and evacuation protocols.',
  'procedure',
  'Safety & Compliance',
  ARRAY['emergency', 'response', 'procedures', 'fire', 'evacuation', 'medical'],
  'published',
  'public',
  '2.0',
  'en',
  'https://example.com/files/emergency-response-procedures.pdf',
  3145728,
  'application/pdf',
  NULL,
  145,
  567,
  false,
  true,
  NULL,
  '{"last_drill": "2024-02-15", "next_drill": "2024-05-15"}',
  '2024-01-05 14:30:00+00',
  '2024-02-10 10:15:00+00',
  '00000000-0000-0000-0000-000000000003',
  '00000000-0000-0000-0000-000000000003'
),

-- Operations Resources
(
  'res-005',
  '00000000-0000-0000-0000-000000000001',
  'Vessel Maintenance Checklist',
  'Comprehensive checklist for routine vessel maintenance tasks, including daily, weekly, and monthly inspection items.',
  'guide',
  'Operations',
  ARRAY['maintenance', 'vessel', 'checklist', 'inspection', 'routine'],
  'published',
  'team',
  '1.5',
  'en',
  'https://example.com/files/vessel-maintenance-checklist.pdf',
  2097152,
  'application/pdf',
  NULL,
  78,
  189,
  false,
  false,
  NULL,
  '{"vessel_types": ["cargo", "passenger"], "frequency": "daily"}',
  '2024-02-01 11:00:00+00',
  '2024-02-05 13:20:00+00',
  '00000000-0000-0000-0000-000000000004',
  '00000000-0000-0000-0000-000000000004'
),

-- Templates
(
  'res-006',
  '00000000-0000-0000-0000-000000000001',
  'Project Proposal Template',
  'Standard template for submitting new project proposals, including budget, timeline, and resource requirements sections.',
  'template',
  'Templates',
  ARRAY['template', 'project', 'proposal', 'budget', 'timeline'],
  'published',
  'public',
  '1.2',
  'en',
  'https://example.com/files/project-proposal-template.docx',
  524288,
  'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
  NULL,
  234,
  456,
  false,
  false,
  NULL,
  '{"format": "docx", "sections": 8, "estimated_time": "30_minutes"}',
  '2024-02-01 11:00:00+00',
  '2024-02-05 13:20:00+00',
  '00000000-0000-0000-0000-000000000002',
  '00000000-0000-0000-0000-000000000002'
),
(
  'res-007',
  '00000000-0000-0000-0000-000000000001',
  'Incident Report Form',
  'Standardized form for reporting workplace incidents, accidents, and near-miss events with proper documentation fields.',
  'template',
  'Safety & Compliance',
  ARRAY['incident', 'report', 'form', 'accident', 'documentation'],
  'published',
  'public',
  '2.1',
  'en',
  'https://example.com/files/incident-report-form.pdf',
  1048576,
  'application/pdf',
  NULL,
  67,
  123,
  false,
  false,
  NULL,
  '{"fillable": true, "required_fields": 12, "approval_workflow": true}',
  '2024-01-20 09:30:00+00',
  '2024-01-25 14:15:00+00',
  '00000000-0000-0000-0000-000000000003',
  '00000000-0000-0000-0000-000000000003'
),

-- Training Materials
(
  'res-008',
  '00000000-0000-0000-0000-000000000001',
  'New Employee Onboarding Guide',
  'Complete onboarding guide for new hires covering company culture, systems access, initial training requirements, and first-week schedule.',
  'guide',
  'Training',
  ARRAY['onboarding', 'new', 'employee', 'training', 'culture', 'systems'],
  'published',
  'private',
  '3.2',
  'en',
  'https://example.com/files/onboarding-guide.pdf',
  4194304,
  'application/pdf',
  'https://example.com/thumbnails/onboarding-thumb.jpg',
  198,
  345,
  true,
  false,
  NULL,
  '{"duration_days": 5, "departments": ["all"], "checklist_items": 25}',
  '2024-01-08 10:45:00+00',
  '2024-02-12 09:30:00+00',
  '00000000-0000-0000-0000-000000000002',
  '00000000-0000-0000-0000-000000000002'
),

-- Draft Resources
(
  'res-009',
  '00000000-0000-0000-0000-000000000001',
  'Updated Communication Protocol',
  'Revised internal communication protocols incorporating new digital tools and response time requirements.',
  'procedure',
  'Operations',
  ARRAY['communication', 'protocol', 'digital', 'response', 'internal'],
  'draft',
  'team',
  '0.9',
  'en',
  NULL,
  NULL,
  NULL,
  NULL,
  0,
  12,
  false,
  false,
  NULL,
  '{"review_status": "pending", "reviewers": ["manager", "team_lead"]}',
  '2024-02-15 16:20:00+00',
  '2024-02-18 11:45:00+00',
  '00000000-0000-0000-0000-000000000004',
  '00000000-0000-0000-0000-000000000004'
),

-- Under Review
(
  'res-010',
  '00000000-0000-0000-0000-000000000001',
  'Equipment Procurement Guidelines',
  'Guidelines for procuring new equipment including approval workflows, vendor evaluation criteria, and budget considerations.',
  'guide',
  'Operations',
  ARRAY['procurement', 'equipment', 'guidelines', 'approval', 'vendor', 'budget'],
  'under_review',
  'role_based',
  '1.0',
  'en',
  'https://example.com/files/procurement-guidelines-draft.pdf',
  1572864,
  'application/pdf',
  NULL,
  23,
  67,
  false,
  false,
  NULL,
  '{"review_deadline": "2024-03-01", "stakeholders": ["finance", "operations", "procurement"]}',
  '2024-02-10 13:15:00+00',
  '2024-02-20 15:30:00+00',
  '00000000-0000-0000-0000-000000000004',
  '00000000-0000-0000-0000-000000000004'
);

-- Insert sample resource access records
INSERT INTO resource_access (id, resource_id, user_id, access_type, accessed_at) VALUES
('acc-001', 'res-001', '00000000-0000-0000-0000-000000000002', 'view', '2024-02-20 10:15:00+00'),
('acc-002', 'res-001', '00000000-0000-0000-0000-000000000003', 'download', '2024-02-20 14:30:00+00'),
('acc-003', 'res-003', '00000000-0000-0000-0000-000000000002', 'view', '2024-02-21 09:45:00+00'),
('acc-004', 'res-003', '00000000-0000-0000-0000-000000000004', 'download', '2024-02-21 11:20:00+00'),
('acc-005', 'res-006', '00000000-0000-0000-0000-000000000003', 'download', '2024-02-22 16:10:00+00');

-- Insert sample resource comments
INSERT INTO resource_comments (id, resource_id, user_id, comment, is_resolved, created_at, updated_at) VALUES
('com-001', 'res-001', '00000000-0000-0000-0000-000000000003', 'The remote work section needs updating with the new VPN requirements.', false, '2024-02-18 14:20:00+00', '2024-02-18 14:20:00+00'),
('com-002', 'res-003', '00000000-0000-0000-0000-000000000002', 'Excellent training material. Very comprehensive coverage of safety protocols.', true, '2024-02-19 11:30:00+00', '2024-02-19 11:30:00+00'),
('com-003', 'res-006', '00000000-0000-0000-0000-000000000004', 'Could we add a section for risk assessment in the template?', false, '2024-02-20 09:15:00+00', '2024-02-20 09:15:00+00');

-- Insert sample training modules
INSERT INTO training_modules (
  id, 
  organization_id, 
  title, 
  description, 
  resource_id, 
  duration_minutes, 
  difficulty_level, 
  prerequisites, 
  learning_objectives, 
  assessment_required, 
  passing_score, 
  certificate_template, 
  is_mandatory, 
  expiry_months, 
  created_at, 
  updated_at
) VALUES
(
  'tm-001',
  '00000000-0000-0000-0000-000000000001',
  'Maritime Safety Fundamentals',
  'Basic maritime safety training covering emergency procedures and equipment usage.',
  'res-003',
  240,
  'beginner',
  ARRAY[]::text[],
  ARRAY['Understand emergency procedures', 'Identify safety equipment', 'Execute evacuation protocols'],
  true,
  80,
  'safety-cert-template',
  true,
  12,
  '2024-01-10 08:00:00+00',
  '2024-01-25 16:45:00+00'
),
(
  'tm-002',
  '00000000-0000-0000-0000-000000000001',
  'New Employee Orientation',
  'Comprehensive onboarding program for new team members.',
  'res-008',
  480,
  'beginner',
  ARRAY[]::text[],
  ARRAY['Understand company culture', 'Navigate company systems', 'Complete initial compliance training'],
  true,
  75,
  'onboarding-cert-template',
  true,
  NULL,
  '2024-01-08 10:45:00+00',
  '2024-02-12 09:30:00+00'
);

-- Insert sample training progress
INSERT INTO training_progress (
  id, 
  training_module_id, 
  user_id, 
  status, 
  progress_percentage, 
  score, 
  started_at, 
  completed_at, 
  certificate_issued_at, 
  expires_at
) VALUES
(
  'tp-001',
  'tm-001',
  '00000000-0000-0000-0000-000000000002',
  'completed',
  100,
  85,
  '2024-02-15 09:00:00+00',
  '2024-02-15 13:30:00+00',
  '2024-02-15 13:35:00+00',
  '2025-02-15 13:35:00+00'
),
(
  'tp-002',
  'tm-001',
  '00000000-0000-0000-0000-000000000003',
  'in_progress',
  65,
  NULL,
  '2024-02-20 10:15:00+00',
  NULL,
  NULL,
  NULL
),
(
  'tp-003',
  'tm-002',
  '00000000-0000-0000-0000-000000000004',
  'completed',
  100,
  92,
  '2024-02-18 08:00:00+00',
  '2024-02-22 17:00:00+00',
  '2024-02-22 17:05:00+00',
  NULL
);
